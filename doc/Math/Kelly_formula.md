---
title: Kelly Formula
parent: Math
has_children: false
nav_order: 1
---

# 凱利公式 Kelly Formula  

假設一場賭局，勝率為$p$，輸的機率為$q=(1-p)$，賠率(獲勝時可得到的報酬率，不含本金)是$b$，則參與這場賭局每次應該下注的本金比例$f$，可以最大化本金的長期增長率:  

$$ f = \frac{b \times p - q} {b} $$  

舉例: 假設一個賭局，有60%的獲勝機率($p=0.6, q=0.4$)，獲勝時可以獲得1倍的報酬(b=1)，則每次應該下注的金額比例是  
$$ f = \frac {1 \times 0.6 - 0.4}{1}=0.2 $$  
以最大化資金的長期增長率  


若賠率$b$太低，$b<q/p$，則$f<0$，不應該下注。  
若賠率$b<0$，則應該下注另一方。  

在實務上，勝率和賠率在投資上無法精確估算，需要對策略作完整的回測，以得到盡量接近的勝率和賠率。  

## 凱利公式的變形  

假設一場賭局，有$p$的機率，可贏得$W$比例的本金(淨贏率)；有$q$的機率會賠掉$L$比例的本金(淨損率)，則參與這場賭局每次應該下注的本金比例 $f$，可以最大化本金的長期增長率:  

$$ f = \frac {p \times W - q \times L} {W \times L} $$  

舉例:  
假設一項投資，有50%的機率賺25%，有50%的機率賠20%，則我應該投入的資金比例為:  

$$ f = \frac {0.5 \times 0.25 - 0.5 \times 0.2} {0.25 \times 0.2} = 0.5=50\% $$  

